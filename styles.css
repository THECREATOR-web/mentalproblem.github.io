:root{
  --bg1: #fff7fb;
  --bg2: #f0fcff;
  --card: #ffffff;
  --muted: #6b7280;
  --accent: #7c3aed;
  --accent-2: #06b6d4;
  --radius: 12px;
  --maxw: 1100px;
  --text-color: #0f172a; /* main text color toggled by theme */
  color-scheme: light;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: radial-gradient(1200px 600px at 10% 10%, #fff0f6 0%, transparent 20%),
              linear-gradient(180deg,var(--bg1),var(--bg2));
  color:var(--text-color);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.4;
}

/* Canvas bubbles */
.canvas{
  position:fixed; inset:0; pointer-events:none; z-index:0;
  background-image:
    radial-gradient(circle at 15% 20%, rgba(124,58,237,0.08) 0 120px, transparent 121px),
    radial-gradient(circle at 85% 80%, rgba(6,182,212,0.06) 0 160px, transparent 161px);
  mix-blend-mode: screen;
}

/* Layout */
.wrap{max-width:var(--maxw); margin:0 auto; padding:1rem}
.site-header{position:sticky; top:0; backdrop-filter: blur(6px); background:linear-gradient(180deg, rgba(255,255,255,0.6), transparent); z-index:10;}
.site-header .wrap{display:flex; align-items:center; justify-content:space-between; gap:1rem}
.logo{font-size:1.25rem; margin:0}
.btn{background:var(--accent); color:white; border:none; padding:0.5rem 0.8rem; border-radius:8px; cursor:pointer; font-weight:600}
.btn.ghost{background:transparent; color:var(--accent); border:1px solid rgba(15,23,42,0.06)}

.main-grid{display:grid; grid-template-columns: repeat(12, 1fr); gap:1rem; margin-top:1rem}
.card{grid-column: span 12; background:var(--card); border-radius: var(--radius); padding:1rem; box-shadow: 0 6px 18px rgba(6,6,6,0.06); z-index:1}
.hero{grid-column: span 12}
.exercises{grid-column: span 6}
.cards{grid-column: span 6}
.resources-preview{grid-column: span 12}

/* Mood panel */
.mood-panel{margin-top:0.5rem}
#moodRange{width:100%; accent-color:var(--accent)}
.mood-row{display:flex; gap:1rem; align-items:center; margin-top:0.5rem}
.mood-emoji{font-size:2rem}
.mood-message{flex:1}
.save-row{display:flex; gap:0.5rem; margin-top:0.6rem}
.save-row input{flex:1; padding:0.5rem; border-radius:8px; border:1px solid #e6e9ee; color:var(--text-color); background:transparent}

/* Topics */
.topic-grid{display:grid; grid-template-columns:repeat(3,1fr); gap:0.6rem; margin-top:0.6rem}
.topic{padding:0.8rem; border-radius:10px; background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(250,250,250,0.8)); transition:transform 160ms; cursor:default; color:var(--text-color)}
.topic:focus, .topic:hover{transform:translateY(-6px); box-shadow:0 6px 18px rgba(2,6,23,0.06)}
.topic-emoji{font-size:1.6rem}

/* Breath */
.breath-wrap{display:flex; gap:1rem; align-items:center; margin-top:0.6rem; flex-direction:column}
.breath-circle{width:140px; height:140px; border-radius:50%; background:linear-gradient(135deg,var(--accent),var(--accent-2)); opacity:0.95; transition:transform 1s ease; display:flex; align-items:center; justify-content:center; color:white; font-weight:700}
.breath-circle.shrink{transform:scale(0.6)}
.breath-circle.expand{transform:scale(1.1)}
.breath-controls{display:flex; gap:0.5rem}

/* Modal */
.modal{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(2,6,23,0.45); visibility:hidden; opacity:0; transition:opacity 200ms}
.modal[aria-hidden="false"]{visibility:visible; opacity:1}
.modal-content{background:white; padding:1.2rem; border-radius:14px; max-width:640px; width:90%}
.muted{color:var(--muted)}
.small{font-size:0.85rem}

/* Footer */
.site-footer{margin-top:1.2rem; padding:1rem 0; color:var(--muted)}

/* Responsive */
@media (max-width:900px){
  .topic-grid{grid-template-columns:repeat(2,1fr)}
  .exercises,.cards{grid-column:span 12}
}

/* Dark theme (toggle via JS adding .dark on <html>) */
html.dark{
  --bg1:#071024; --bg2:#00101a; --card:#031426; --muted:#9aa6b2; --accent:#9b6bff; --accent-2:#2dd4bf; --text-color:#ffffff; color-scheme:dark;
}

/* Ensure links remain visible in both themes */
a{color:var(--accent-2)}
a:focus, a:hover{text-decoration:underline; text-decoration-thickness:2px}